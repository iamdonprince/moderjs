<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Asynchronous JavaScript</title>
  </head>
  <body>
    <h1>Asynchronous JavaScript</h1>
    <script>
      //   function getRecipe() {
      //     setTimeout(() => {
      //       const arr = [112, 33, 434, 66];
      //       setTimeout(
      //         (id) => {
      //           const pub = {
      //             title: "pot is bot",
      //             publisher: "PK",
      //           };
      //           console.log(`${id} :  ${pub.title}`);
      //           setTimeout(
      //             (pub) => {
      //               const p = {
      //                 title: "harry poter",
      //                 publisher: "nk",
      //               };
      //               console.log(pub);
      //             },
      //             500,
      //             pub.publisher
      //           );
      //         },
      //         1000,
      //         arr[2]
      //       );
      //     }, 1500);
      //   }
      //   getRecipe();

      const getIds = new Promise((resolve, reject) => {
        setTimeout(() => {
          resolve([112, 33, 434, 66]);
        }, 1500);
      });

      const getRecipe = (ID) => {
        return new Promise((resolve, reject) => {
          setTimeout(
            (ID) => {
              const pub = {
                title: "pot is bot",
                publisher: "PK",
              };
              resolve(`${ID} :  ${pub.title}`);
            },
            1500,
            ID
          );
        });
      };

      const getAuthor = (publisher) => {
        return new Promise((resolve, reject) => {
          setTimeout(
            (publisher) => {
              const p = {
                title: "harry poter",
                publisher: "nk",
              };

              resolve(`${publisher} author : ${p.publisher}`);
            },
            2000,
            publisher
          );
        });
      };

      // getIds
      //   .then((res) => {
      //     console.log(res);
      //     return getRecipe(res[2]);
      //   })
      //   .then((resRecipe) => {
      //     console.log(resRecipe);
      //     return getAuthor(resRecipe);
      //   })
      //   .then((pub) => {
      //     console.log(pub);
      //   })
      //   .catch((error) => console.log(error));

      //  async function getRecipeAw(){
      //         const Id =  await getIds;
      //         console.log(Id)
      //         const Recipe = await getRecipe(Id[2])
      //         console.log(Recipe)
      //         const publisher =  await getAuthor(Recipe)
      //         console.log(publisher)
      //  }

      //  getRecipeAw()

      // function getWeather(name) {
      //   fetch(
      //     `http://api.openweathermap.org/data/2.5/weather?q=${name}&appid=5f5ff49c94bb3cfe4eb102f052076048`
      //   )
      //     .then((res) => {
      //       console.log(res);
      //       return res.json();
      //     })
      //     .then((data) => {
      //       console.log(data);
      //     })
      //     .catch((err) => console.log(err));
      // }
      // getWeather("Dubai");
      //

      // const getWeather = async (name) => {
      //   try {
      //     let res = await fetch(
      //       `http://api.openweathermap.org/data/2.5/weather?q=${name}&appid=5f5ff49c94bb3cfe4eb102f052076048`
      //     );

      //     let data = await res.json();
      //     console.log(data);
      //   } catch (err) {
      //     console.log(err);
      //   }
      // };
      getWeather("London");
    </script>
  </body>
</html>
